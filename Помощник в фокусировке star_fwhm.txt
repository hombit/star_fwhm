Помощник в фокусировке star_fwhm.py

1) Введение
Помощник выводит график зависимости размера изображения звезды в фокусировочных файлах в указанной папке и демонстрирует текущее изображение.

2) Использование
Для работы программе требуется папка, в которую записываются изображения звезды в формате fits.
Крайне желательно, что бы поле не включало других звезд и захватывало небольшую область фона вокруг звезды, оптимальный размер составляет около 15-20 угловых секунд.
Файлы должны быть именованы как *focus*NUMBER.EXT, где * - любые символы, NUMBER - возрастающий во времени номер изображения, EXT - любое буквенно-циферное выражение (обычно .fits, .FIT и т.п.).

Программа может быть запущена двумя способами: через Explorer и через терминал.

Запуск из терминала (cmd или PowerShell) производится следующим образом:
star_fwhm.py [-h] [-d DIR] [-s SCALE] [-r]
По-умолчанию будут отображаться файлы из текущей папки, другая папка задается с помощью опции --dir (-d).
Опция --scale (-s) отвечает за масштаб изображения, который по-умолчанию равен 1 угловой секунде на пиксель.
Опция --recent-only (-r) полезна, если требуется выводить только последнее не выведенное изображение, иначе будут последовательно выводиться все изображения из папки.
Стоит использовать эту опцию, если в папке уже содержалось какое-то количество изображений до запуска программы, или если отрисовка графика и изображения программой занимает больше времени, чем получение новых изображений.
Опция --help (-h) выводит короткую справку по использованию программы.

Кроме того, можно кликнуть правой кнопкой по необходимой папке в Explorer и выбрать "star_fwhm" или "star_fwhm --recent-only".
В таком случае программа будет запущена в данной папке без флагов или с флагом --recent-only, соответственно.
При таком способе использования изменить масштаб изображения невозможно, будет использован масштаб по-умолчанию - 1''/пиксель.

3) Принцип работы
Программа отслеживает появление новых fits-файлов в заданной папке, названных по вышеуказанному соглашению.
По периметру изображения (слой с толщиной 5% от его размера) определяется фон, который вычитается из изображения.
Затем, находится центр масс очищенного от фона изображения.
Через центр масс изображние срезается по x и y координатам и фиттируются гауссианами.
На график выводятся значения полной ширины на половине максимума этих гауссиан, крестиком обозначено значение по x, звездочкой - по y.
Так же выводится контурная карта текущего изображения, очищенная от фона.
Перекрестьем на контурной карте указано положение центра масс изображения.



Константин Маланчев, 2015